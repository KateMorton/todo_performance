if(!window.console){window.console={log:function(){}}}function DataManager(){this.supports_local_storage=function(){try{return"localStorage" in window&&window.localStorage!==null}catch(a){return false}};this.retrieve_local_storage=function(a){return localStorage.getItem(a)};this.retrieve_local_productivityunit=function(){var a=this.retrieve_local_storage("productivityunit");if(a==null||a.length==0){a=this.retrieve_local_storage("userdata");if(a!=null&&a.length>0){a=convert_from_old_format(a)}}var b=this.objectify(a);if(b&&b.current_list>=0){return b}else{return false}};this.retrieve_local_syncmanager=function(){var a=this.retrieve_local_storage("syncmanager");var b=this.objectify(a);if(b&&b.active>=0){return b}else{return false}};this.set_local_storage=function(b,a){localStorage.setItem(b,a)};this.objectify=function(d){var a=true;try{var b=jQuery.parseJSON(d)}catch(c){a=false}if(a){return b}else{return false}};this.serialise_everything=function(b,a){return" { "+a.serialise_ancilliary_data()+', "lists" : '+a.serialise_lists(a.listmanager.lists)+', "syncmanager" : '+b.toJSON()+', "categories" : '+a.categorymanager.toJSON()+" } "};this.serialise_productivityunit=function(a){return a.toJSON()};this.serialise_syncmanager=function(a){return a.toJSON()};this.save_everything=function(b,a){this.save_productivityunit(a);this.save_syncmanager(b)};this.save_productivityunit=function(a){this.set_local_storage("productivityunit",this.serialise_productivityunit(a))};this.save_syncmanager=function(a){this.set_local_storage("syncmanager",this.serialise_syncmanager(a))}}function format_date(h){var f=h;if(h.length==10){f=h*1000}var c=new Date(f);var d=c.getMinutes();var k=c.getHours();var m=c.getDay();var e=c.getDate();var g=c.getMonth();var j=c.getFullYear();var i="am";var l="th";var a=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat");var b=new Array("Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec");if(d<10){d="0"+d}if(k>12){i="pm";k=k-12}else{if(k==12){i="pm"}}if(e==1||e==21){l="st"}else{if(e==2||e==22){l="nd"}else{if(e==3||e==23){l="rd"}}}return k+":"+d+" "+i+", "+a[m]+" "+e+l+" "+b[g]}function format_date_short(g){var e=g;if(g.length==10){e=g*1000}var c=new Date(e);var i=c.getDay();var d=c.getDate();var f=c.getMonth();var h=c.getFullYear();var j="th";var a=new Array("Sun","Mon","Tues","Wednes","Thurs","Fri","Satur");var b=new Array("January","February","March","April","May","June","July","August","September","October","November","December");if(d==1||d==21){j="st"}else{if(d==2||d==22){j="nd"}else{if(d==3||d==23){j="rd"}}}return a[i]+"day "+d+j+" "+b[f]+" "+h}function strip_chars_from_ids(a){return a.map(function(b){return parseInt(b.replace(/\D/g,""))})}function strip_chars_from_id(a){return parseInt(a.replace(/\D/g,""))}function strings_to_ints(a){return a.map(function(b){return parseInt(b)})}function encode_to_post(a){}function unencode_from_post(a){}function convert_from_old_format(data){if(data.match(/^%/)){dataclean=unescape(data)}else{dataclean=data}tempobject=eval("("+dataclean+")");if(tempobject.current_list>=0&&tempobject.lists&&tempobject.lists.length>0){var tempproductivity=new ProductivityUnit();tempproductivity.current_list=tempobject.current_list;tempproductivity.listmanager.unpack(tempobject);tempproductivity.categorymanager.unpack(tempobject);tempproductivity.default_lists=1;var packed=tempproductivity.toJSON();console.log("packing");return packed}else{return false}}function sort_item_random(d,c){return 0.5-Math.random()}function sort_item_alphabetical(d,c){if(d.name.toLowerCase()<c.name.toLowerCase()){return -1}else{return 1}}function sort_item_completed_time(d,c){return(d.datecompleted-c.datecompleted)}function sort_item_tomorrow_time(d,c){return(d.tomorrow-c.tomorrow)}function trim(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};